{
    "specification_version": "1.0.0",
    "metadata": {
        "app_id": "inventory_management_system",
        "screen_id": "InventoryMain",
        "source_legacy_reference": "Cordova_jQuery_2017_InventoryMain"
    },
    "domain_models": {
        "StockItem": {
            "fields": {
                "id": "String (UUID)",
                "title": "String",
                "sku_info": "String",
                "last_updated": "Timestamp"
            }
        },
        "AuthState": {
            "fields": {
                "isLoggedIn": "Boolean",
                "sessionToken": "String (Secret)"
            }
        },
        "HardwareCapture": {
            "fields": {
                "capturedImage": "Blob/Base64",
                "scannedCode": "String"
            }
        }
    },
    "behavioral_model": {
        "initial_state": "UNINITIALIZED",
        "states": {
            "UNINITIALIZED": {
                "on": {
                    "APP_LOAD": "CHECKING_AUTH"
                }
            },
            "CHECKING_AUTH": {
                "on": {
                    "AUTH_VALID": "FETCHING_DATA",
                    "AUTH_INVALID": "UNAUTHORIZED_REDIRECT"
                }
            },
            "FETCHING_DATA": {
                "entry": "showLoadingOverlay",
                "exit": "hideLoadingOverlay",
                "on": {
                    "FETCH_SUCCESS": "IDLE",
                    "FETCH_FAILURE": "ERROR_STATE"
                }
            },
            "IDLE": {
                "on": {
                    "SEARCH_TRIGGERED": "FILTERING",
                    "HARDWARE_ACTION": "HARDWARE_ACTIVE",
                    "DELETE_REQUESTED": "CONFIRMING_DELETE"
                }
            },
            "FILTERING": {
                "on": {
                    "CLEAR_FILTER": "IDLE",
                    "INPUT_CHANGE": "FILTERING"
                }
            },
            "HARDWARE_ACTIVE": {
                "on": {
                    "CAPTURE_COMPLETE": "IDLE",
                    "CAPTURE_CANCELLED": "IDLE"
                }
            },
            "CONFIRMING_DELETE": {
                "on": {
                    "CONFIRM": "MUTATING_STATE",
                    "CANCEL": "IDLE"
                }
            },
            "MUTATING_STATE": {
                "on": {
                    "SUCCESS": "IDLE"
                }
            }
        }
    },
    "ui_hierarchy": {
        "component": "Layout.Scaffold",
        "id": "inventory_root",
        "header": {
            "component": "Navigation.AppBar",
            "properties": {
                "title": "Inventory Management"
            },
            "actions": [
                {
                    "id": "action_logout",
                    "component": "Input.Button",
                    "variant": "Text",
                    "label": "Logout",
                    "event": "AUTH_LOGOUT"
                }
            ]
        },
        "content": {
            "component": "Layout.Box",
            "layout": "Flex-Column",
            "spacing": "Standard",
            "children": [
                {
                    "id": "search_section",
                    "component": "Composition.SearchBar",
                    "children": [
                        {
                            "id": "inventory_search_input",
                            "component": "Input.TextField",
                            "placeholder": "Search items..."
                        },
                        {
                            "id": "inventory_search_submit",
                            "component": "Input.Button",
                            "label": "Search",
                            "intent": "SEARCH_TRIGGERED"
                        }
                    ]
                },
                {
                    "id": "main_inventory_list",
                    "component": "DataDisplay.List",
                    "properties": {
                        "loadStrategy": "Overlay",
                        "dataSource": "application_state.inventory.items"
                    },
                    "itemTemplate": {
                        "component": "DataDisplay.Card",
                        "children": [
                            {
                                "component": "Typography.Title",
                                "binding": "item.title"
                            },
                            {
                                "component": "Typography.Caption",
                                "binding": "item.sku_info"
                            },
                            {
                                "component": "Layout.Row",
                                "alignment": "End",
                                "children": [
                                    {
                                        "id": "btn_edit",
                                        "component": "Input.Button",
                                        "size": "Small",
                                        "label": "Edit",
                                        "theme": "Success"
                                    },
                                    {
                                        "id": "btn_delete",
                                        "component": "Input.Button",
                                        "size": "Small",
                                        "label": "Delete",
                                        "theme": "Danger",
                                        "event": "DELETE_REQUESTED"
                                    }
                                ]
                            }
                        ]
                    }
                }
            ]
        },
        "footer": {
            "component": "Navigation.BottomBar",
            "children": [
                {
                    "id": "btn_native_camera",
                    "component": "Input.Button",
                    "label": "Camera",
                    "icon": "camera_alt",
                    "action": {
                        "type": "NativeService",
                        "service": "Camera",
                        "payload_mapping": "hardware_cache.captured_image"
                    }
                },
                {
                    "id": "btn_native_scanner",
                    "component": "Input.Button",
                    "label": "Scanner",
                    "icon": "barcode_scanner",
                    "action": {
                        "type": "NativeService",
                        "service": "BarcodeScanner",
                        "payload_mapping": "hardware_cache.scanned_code"
                    }
                }
            ]
        }
    },
    "logic_manifest": {
        "data_fetching": {
            "service": "InventoryService",
            "method": "GET",
            "path": "/posts",
            "transformation": {
                "note": "Legacy duplication removed in favor of virtualized list rendering",
                "action": "Normalize items to StockItem model"
            }
        },
        "filtering": {
            "type": "ClientSide",
            "target": "main_inventory_list",
            "criteria": "case_insensitive_containment"
        }
    },
    "design_rationale": {
        "architectural_optimization": "The legacy specification mentioned a 6x data duplication for stress testing. In the IS, this is removed from the logic layer and replaced with a 'Virtualized List Rendering' strategy suggestion to handle large datasets efficiently without corrupting the data model.",
        "state_standardization": "Transformed disparate jQuery-style event listeners into a formal State Machine. This ensures that UI elements like 'Loading Overlay' are bound to the 'FETCHING_DATA' state rather than being toggled manually.",
        "component_abstraction": "Genericized 'SmallButton' and 'Button' into a single 'Input.Button' component with 'variant' and 'size' properties to support a consistent design system (A2UI).",
        "hardware_isolation": "Native services (Camera/Scanner) are decoupled from the UI flow, mapping their outputs to a clean 'HardwareCapture' domain model to ensure the UI remains platform-agnostic."
    }
}